<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>AzBillards | Hội viên</title>
        <!-- Favicon -->
        <!-- Google Fonts -->
        <!--Reset CSS -->
        <link rel="stylesheet" href="../css/reset.css" />
        <!-- Style CSS -->
        <link rel="stylesheet" href="../css/header.css">
        <link rel="stylesheet" href="../css/membership.css">
    </head>
    <body>
      <!-- header -->
      <div id="header">
        <!-- main section -->
        <div class="header-section" id="header-section-main">
            <div id="header-nav">
                <a href="/" class="header-nav-link">
                    <div class="header-nav-link-content">
                        TRANG CHỦ
                    </div>
                </a>

                <a href="/giai-dau" class="header-nav-link">
                    <div class="header-nav-link-content" id="dropdown">
                        GIẢI ĐẤU
                    </div>
                </a>

                <a href="/membership" class="header-nav-link">
                    <div class="header-nav-link-content active" id="dropdown">
                        HỘI VIÊN
                    </div>
                </a>
            </div>


            <a id="header-logo" href="/"><img src="../image/logo.png" alt=""></a>

            <div id="header-utility">
                <a href="/signin_login">
                    <svg width='30' height='30'>
                        <circle cx='15' cy='10' r='7' stroke='' stroke-width='0' fill='#DEB526' />
                        <ellipse cx='15' cy='30' rx='15' ry='10' fill='#DEB526' stroke='' stroke-width='0' />
                    </svg>
                </a>
            </div>
        </div>
    </div>

    <!-- body -->
    <div id="body-container">
        <h1>QUYỀN LỢI HỘI VIÊN</h1>

        <div class="header-separator"></div>

        <div class="benefits">
            <h2 class="benefits-header">Nhận ưu đãi giảm giá</h2>
            <div>
                <p class="benefits-detail">Khi tham gia vào câu lạc bộ của chúng tôi, bạn sẽ được hưởng một loạt các ưu đãi đặc biệt và khuyến mãi hấp dẫn. Từ những giảm giá đặc biệt cho việc thuê sân đến các gói ưu đãi dành cho thành viên, chúng tôi cam kết mang lại những trải nghiệm tuyệt vời nhất cho bạn trong mỗi lần ghé thăm.</p>
                <img src="../image/membership_discount.png" alt="" class="benefit-img">
            </div>
        </div>
        <div class="benefits">
            <h2 class="benefits-header benefit-middle">Tham gia các giải đấu của câu lạc bộ</h2>
            <div>
                <img src="../image/membership_vs.jpg" alt="" class="benefit-img">
                <p class="benefits-detail benefit-middle">Cảm thấy hào hứng với cảm giác cạnh tranh? Câu lạc bộ Azbilliards thường xuyên tổ chức các giải đấu và sự kiện thể thao để thử thách kỹ năng của bạn và tạo ra những kỷ niệm đáng nhớ. Dù bạn là người mới bắt đầu hay là cựu chiến binh, có một sân chơi đang chờ đón bạn ở mọi cấp độ.</p>
            </div>
        </div>
        <div class="benefits">
            <h2 class="benefits-header">Và các ưu đãi đặc quyền khác</h2>
            <div>
                <p class="benefits-detail">Đừng bỏ lỡ cơ hội nhận các ưu đãi đặc quyền và thông tin mới nhất về các sự kiện sắp tới! Đăng ký ngay trên trang web quản lý đặt bàn của chúng tôi để nhận được thông báo và ưu đãi độc quyền mỗi khi có sự kiện đặc biệt diễn ra. Hành trình thú vị với bi-a chỉ cách bạn một cú click!</p>
                <img src="../image/membership_gift.png" alt="" class="benefit-img">
            </div>
        </div>

        <div class="separator">
            <div class="separator-square"></div>
            <div class="main-separator"></div>
            <div class="separator-square"></div>
        </div>

        <h2 class="benefits-header signup-now">Đăng kí ngay</h2>
        <p class="benefits-detail signup-now">Đừng bỏ lỡ cơ hội trở thành một phần của câu lạc bộ Billiards Azbilliards và tận hưởng những ưu đãi đặc biệt dành cho hội viên. Hãy đăng ký ngay hôm nay trên trang web quản lý đặt bàn của chúng tôi và bắt đầu hành trình mới của bạn với bi-a!</p>

        <div class="memberships-container">
            <!-- <div class="membership">
                    <h3 class="membership-name">Jack</h3>

                    <div class="separator">
                        <div class="separator-square"></div>
                        <div class="main-separator"></div>
                        <div class="separator-square"></div>
                    </div>

                    <ul>
                        <li>Nhận các ưu đãi  giảm giá</li>
                        <li>Đăng kí tham gia các giải đấu</li>
                    </ul>

                    <div class="separator">
                        <div class="separator-square"></div>
                        <div class="main-separator"></div>
                        <div class="separator-square"></div>
                    </div>

                    <a href="/membership_payment">
                        <div class="membership-btn">
                            <span>Tháng:</span>
                            <span class="membership-price">20.000đ</span>
                        </div>
                    </a>
                    <a href="/membership_payment">
                        <div class="membership-btn">
                            <span>Quý:</span>
                            <span class="membership-price">55.000đ</span>
                        </div>
                    </a>
                    <a href="/membership_payment">
                        <div class="membership-btn">
                            <span>Năm:</span>
                            <span class="membership-price">200.000đ</span>
                        </div>
                    </a>
                </div>

                    <div class="membership">
                        <h3 class="membership-name">King</h3>

                        <div class="separator">
                            <div class="separator-square"></div>
                            <div class="main-separator"></div>
                            <div class="separator-square"></div>
                        </div>

                        <ul>
                            <li>Nhận các ưu đãi  giảm giá lớn hơn</li>
                            <li>Đăng kí tham gia các giải đấu với lệ phí giảm</li>
                        </ul>

                        <div class="separator">
                            <div class="separator-square"></div>
                            <div class="main-separator"></div>
                            <div class="separator-square"></div>
                        </div>

                        <a href="/membership_payment">
                            <div class="membership-btn">
                                <span>Tháng:</span>
                                <span class="membership-price">25.000đ</span>
                            </div>
                        </a>
                        <a href="/membership_payment">
                            <div class="membership-btn">
                                <span>Quý:</span>
                                <span class="membership-price">70.000đ</span>
                            </div>
                        </a>
                        <a href="/membership_payment">
                            <div class="membership-btn">
                                <span>Năm:</span>
                                <span class="membership-price">250.000đ</span>
                            </div>
                        </a>
                    </div>
                    <div class="membership">
                        <h3 class="membership-name">Ace</h3>

                        <div class="separator">
                            <div class="separator-square"></div>
                            <div class="main-separator"></div>
                            <div class="separator-square"></div>
                        </div>

                        <ul>
                            <li>Nhận các ưu đãi  giảm giá lớn nhất</li>
                            <li>Đăng kí tham gia các giải đấu miễn phí</li>
                            <li>Nhận quà vào dịp lễ hoặc ngày sinh nhật khi đến AZBillards</li>
                        </ul>

                        <div class="separator">
                            <div class="separator-square"></div>
                            <div class="main-separator"></div>
                            <div class="separator-square"></div>
                        </div>

                        <a href="/membership_payment">
                            <div class="membership-btn">
                                <span>Tháng:</span>
                                <span class="membership-price">35.000đ</span>
                            </div>
                        </a>
                        <a href="/membership_payment">
                            <div class="membership-btn">
                                <span>Quý:</span>
                                <span class="membership-price">95.000đ</span>
                            </div>
                        </a>
                        <a href="/membership_payment">
                            <div class="membership-btn">
                                <span>Năm:</span>
                                <span class="membership-price">320.000đ</span>
                            </div>
                        </a>
                    </div>
                </div> -->
            </div>
        </div>

        <!-- footer -->
        <div id="footer">   
            <a href="/"><img src="../image/logo.png" alt="" id="footer-logo"></a>
            <div class="footer-section" >

                <span class="footer-heading">LIÊN HỆ</span>
                <div><span class="footer-info-title">Địa chỉ: </span><span class="footer-info">số 20 ngõ 113 Hoàng Cầu, Ô chợ Dừa, Đống Đa, Hà Nội</span></div>
                <div><span class="footer-info-title">Hotline: </span><span class="footer-info">037287908</span></div>
                <div><span class="footer-info-title">Mở cửa: </span><span class="footer-info">24/7</span></div>
            </div>

            <div class="footer-section">
                <h2 class="footer-heading">THÔNG TIN</h2>
                <a href="">Liên hệ</a>
                <a href="">Giới thiệu</a>
                <a href="">Tuyển dụng</a>
            </div>

            <div class="footer-section">
                <h2 class="footer-heading">CHÍNH SÁCH</h2>
                <a href="">Chính Sách Bảo Mật</a>
                <a href="">Hướng dẫn thanh toán</a>
                <a href="">Hướng dẫn đặt bàn</a>
            </div>

            <div class="footer-section" id="footer-last-section">
                <h2 class="footer-heading">CHỨNG NHẬN</h2>
                <img src="../image/footer_bct.png" alt="">
                <img src="../image/footer_ncsc.png" alt="">
            </div>
        </div>
</body>
<script src="../javascript/header.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    start();
    function start() {
        $.ajax({
            url: 'http://localhost:3000/api/membership',
            method: "GET",
            success: (res) => {
                if (res.status == 200) {
                    let countMembership = res.metadata.length;
                    let html = ""
                    for (let i = 0; i < countMembership; i++) {
                        html += renderMembership(res.metadata[i])
                    }
                    $(".memberships-container").html(html)
                }
            }
        })
    }


    function renderMembership(data) {
        let html = ''
        html += `<div class="membership">
                <h3 class="membership-name">${data.name}</h3>
                <div class="separator">
                    <div class="separator-square"></div>
                    <div class="main-separator"></div>
                    <div class="separator-square"></div>
                </div>

                <ul>
                    <li>${data.description}</li>
                </ul>

                <div class="separator">
                    <div class="separator-square"></div>
                    <div class="main-separator"></div>
                    <div class="separator-square"></div>
                </div>

                <a style = "cursor: pointer" onclick = signupMembership(${data.id},'0')>
                    <div class="membership-btn">
                        <span>Tháng:</span>
                        <span class="membership-price">${data.price_month}</span>
                    </div>
                </a>
                <a style = "cursor: pointer" onclick = signupMembership(${data.id},'1')>
                    <div class="membership-btn">
                        <span>Quý:</span>
                        <span class="membership-price">${data.price_quater}</span>
                    </div>
                </a>
                <a style = "cursor: pointer" onclick = signupMembership(${data.id},'2')>
                    <div class="membership-btn">
                        <span>Năm:</span>
                        <span class="membership-price">${data.price_year}</span>
                    </div>
                </a>
            </div>`
        return html
    }
    function signupMembership(idMembership, type) {
        const swalWithBootstrapButtons = Swal.mixin({
            customClass: {
                confirmButton: "btn btn-success",
                cancelButton: "btn btn-danger"
            },
            buttonsStyling: false
        });
        swalWithBootstrapButtons.fire({
            title: "Xác nhận?",
            text: "Bạn có chắc chắn đăng ký gói này không!",
            icon: "warning",
            showCancelButton: true,
            confirmButtonText: "Đồng ý!",
            cancelButtonText: "Hủy!",
            reverseButtons: true
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: 'http://localhost:3000/api/order/membership',
                    method: "POST",
                    data: {
                        membership_id: idMembership,
                        type: type
                    },
                    success: (res) => {
                        if (res.status == 200) {
                            Swal.fire({
                                icon: 'success',
                                title: 'Thông báo',
                                text: `${res.message}`,
                                timer: 1500
                            }).then(() => {
                                window.location.href = "/membership_payment"
                            })
                        }
                    }
                })
            } else if (
                result.dismiss === Swal.DismissReason.cancel
            ) {

            }
        });

    }
</script>

</html>